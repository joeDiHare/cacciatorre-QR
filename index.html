<!DOCTYPE html>
<meta charset="utf-8">
<h1>Cacciatorre 2016</h1>
<p><i>switcher</i></p>
<style>

.land {
fill: #17a6ec;
  /*fill: #ddd;*/
}

.state-borders {
  fill: none;
  stroke: #fff;
}

.contact-arc {
  fill: none;
}

.contact:hover .contact-arc {
  stroke: #330000;
}

.contact-cell {
  fill: none;
  stroke: #000;
  stroke-opacity: 0.1;
  pointer-events: all;
}

</style>
<svg width="1300" height="800"></svg>

<script src="jquery-3.1.1.min.js"></script>
<script src="jquery-csv.js"></script>
<script>
var team_psw = prompt("Please enter your team password", "");
console.log('password inputted: ' + team_psw)
</script>
<script>
// This will build an array of the parameters of the query string. From there you just need to add logic to find the param you specified in your question and take the appropriate redirect using

var $ = jQuery = require('jquery');
require('./jquery.csv.js');
var csv_text = 'team_name,team_psw,curr_loc,next_loc,no_clue,REBEL,psw1,Villa,Bottazzi,2'
var data = $.csv.toObjects(csv_text)
console.log('csv: ' + csv_text)
console.log('data: ' + data)



function getQueryStringArray(){
    var assoc=[];
    var items = window.location.search.substring(1).split('&');
    for(var j = 0; j < items.length; j++) {
       var a = items[j].split('='); assoc[a[0]] = a[1];
    }
    return assoc;
}

function switchIndTeams(ind_code, team_psw){
    switch (ind_code) {
      case '1':
        var curr_loc = 'Villa+delle+Mimose'
        switch (team_psw) {
          case 'psw1':
            url_next_ind = 'http://localhost:6888/indizi/loc1.html?loc='+curr_loc;
            break;
          case 'psw2':
            url_next_ind = 'http://localhost:6888/indizi/loc2.html?loc='+curr_loc;
            break;
        }
        break;
      case '2':
        var curr_loc = 'Parco+Bottazzi'
        switch (team_psw) {
          case 'psw1':
            url_next_ind = 'http://localhost:6888/indizi/loc3.html?loc='+curr_loc;
            break;
          case 'psw2':
            url_next_ind = 'http://localhost:6888/indizi/loc4.html?loc='+curr_loc;
            break;
        }
        break;
    }
    var TEAM = 'REBEL' //to do: get teams/psw from json
    return url_next_ind+'&team='+TEAM;
}

//point at which you want to determine redirection
var qs = getQueryStringArray();
var url_next_ind = '';
if (qs.ind !== 'undefined' && qs.ind) {

  url_next_ind = switchIndTeams(qs.ind, team_psw)

  console.log(team_psw+'; '+url_next_ind)
   window.location.href = url_next_ind; //reroute
 }
</script>
